import{x as e,aB as a,aC as r,r as s,c as l,j as o,al as n,y as t,z as u,Q as i,I as d,H as p,K as m,V as c,a4 as g,u as f,M as v,O as b,A as h}from"./vendor-Gjpba6V1.js";import{u as y,n as w}from"./index-C7qi9upo.js";import{u as _,l as x}from"./ui-BjnOHbRg.js";import{_ as V}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./utils-C5DcNM9U.js";const j={class:"login-container"},q=V(e({__name:"Login",setup(e){const V=a(),q=r(),P=y(),U=s(),C=s({username:"",password:""}),E={username:[{required:!0,message:"Username is required",trigger:"blur"},{min:3,max:50,message:"Username must be between 3 and 50 characters",trigger:"blur"}],password:[{required:!0,message:"Password is required",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}]},S=l(()=>C.value.username.length>=3&&C.value.password.length>=6),k=()=>{return e=this,a=null,r=function*(){if(U.value)try{if(!(yield U.value.validate()))return;yield P.login(C.value),w.success("Login successful!");const e=q.query.returnTo||"/dashboard";V.push(e)}catch(e){}},new Promise((s,l)=>{var o=e=>{try{t(r.next(e))}catch(a){l(a)}},n=e=>{try{t(r.throw(e))}catch(a){l(a)}},t=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,n);t((r=r.apply(e,a)).next())});var e,a,r};return o(()=>{P.clearError()}),(e,a)=>{const r=n("el-input"),s=n("el-form-item"),l=n("el-button"),o=n("el-form"),y=n("el-alert"),w=n("el-card");return u(),t("div",j,[i(w,{class:"login-card",shadow:"always"},{header:d(()=>a[2]||(a[2]=[h("div",{class:"login-header"},[h("h2",null,"Blog Admin Login"),h("p",null,"Sign in to manage your blog content")],-1)])),default:d(()=>[i(o,{ref_key:"loginFormRef",ref:U,model:C.value,rules:E,"label-position":"top",size:"large",onSubmit:c(k,["prevent"])},{default:d(()=>[i(s,{label:"Username",prop:"username"},{default:d(()=>[i(r,{modelValue:C.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value.username=e),placeholder:"Enter your username","prefix-icon":f(_),clearable:"","data-testid":"username-input",onKeyup:g(k,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),i(s,{label:"Password",prop:"password"},{default:d(()=>[i(r,{modelValue:C.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>C.value.password=e),type:"password",placeholder:"Enter your password","prefix-icon":f(x),"show-password":"",clearable:"","data-testid":"password-input",onKeyup:g(k,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),i(s,null,{default:d(()=>[i(l,{type:"primary",size:"large",loading:f(P).loading,disabled:!S.value,onClick:k,class:"login-button","data-testid":"login-button"},{default:d(()=>[v(b(f(P).loading?"Signing in...":"Sign In"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"]),f(P).error?(u(),p(y,{key:0,title:f(P).error,type:"error",closable:!0,onClose:f(P).clearError,class:"error-alert"},null,8,["title","onClose"])):m("",!0)]),_:1})])}}}),[["__scopeId","data-v-67f78a86"]]);export{q as default};
