const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Login-CgED9NaC.js","assets/js/vendor-Gjpba6V1.js","assets/js/ui-BjnOHbRg.js","assets/js/_plugin-vue_export-helper-BCo6x5W8.js","assets/js/utils-C5DcNM9U.js","assets/css/Login-8mk_8_GU.css","assets/js/AdminLayout-gMCMbuwT.js","assets/css/AdminLayout-RkOOUfzS.css","assets/js/Dashboard-DJeUCf1H.js","assets/js/useApi-BRoN40Jh.js","assets/js/charts-DpHpzj3Z.js","assets/css/Dashboard--9bEZMpr.css","assets/js/Articles-C-dXoets.js","assets/js/articles-CAehjcUo.js","assets/js/categories-Z7P03ef2.js","assets/css/Articles-C4Rnv7ED.css","assets/js/ArticleCreate-CayHYa0h.js","assets/js/ArticleEditor-Tys5XVTL.js","assets/js/editor-Cn0jQM0z.js","assets/css/ArticleEditor-BE9QTbYG.css","assets/css/ArticleCreate-BFR5tZD5.css","assets/js/ArticleEdit-Bab0P9Fc.js","assets/css/ArticleEdit-Bt183YLF.css","assets/js/Categories-CNxg2qX5.js","assets/css/Categories-Bhlv1No-.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,s=(e,s)=>{for(var a in s||(s={}))r.call(s,a)&&n(e,a,s[a]);if(t)for(var a of t(s))o.call(s,a)&&n(e,a,s[a]);return e},a=(e,t,r)=>n(e,"symbol"!=typeof t?t+"":t,r),i=(e,t,r)=>new Promise((o,n)=>{var s=e=>{try{i(r.next(e))}catch(t){n(t)}},a=e=>{try{i(r.throw(e))}catch(t){n(t)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,a);i((r=r.apply(e,t)).next())});import{x as l,al as u,y as c,z as d,Q as m,ax as h,r as f,ay as p,az as g,au as y,aA as v}from"./vendor-Gjpba6V1.js";import{E,a as w,b as _,d as T,i as A}from"./ui-BjnOHbRg.js";import{a as k}from"./utils-C5DcNM9U.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const b={id:"app"},S=l({__name:"App",setup:e=>(e,t)=>{const r=u("router-view");return d(),c("div",b,[m(r)])}}),O={},C=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));o=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in O)return;O[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,r&&n.setAttribute("nonce",r),document.head.appendChild(n),t?new Promise((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},P={success(e,t){E.success(s({message:e,duration:3e3,showClose:!0},t))},error(e,t){E.error(s({message:e,duration:5e3,showClose:!0},t))},warning(e,t){E.warning(s({message:e,duration:4e3,showClose:!0},t))},info(e,t){E.info(s({message:e,duration:3e3,showClose:!0},t))},notify:{success(e,t,r){_.success(s({title:e,message:t,duration:4e3,showClose:!0},r))},error(e,t,r){_.error(s({title:e,message:t,duration:6e3,showClose:!0},r))},warning(e,t,r){_.warning(s({title:e,message:t,duration:5e3,showClose:!0},r))},info(e,t,r){_.info(s({title:e,message:t,duration:4e3,showClose:!0},r))}},confirm(e){return i(this,null,function*(){try{return yield w.confirm(e.message,e.title||"Confirm Action",{confirmButtonText:e.confirmButtonText||"Confirm",cancelButtonText:e.cancelButtonText||"Cancel",type:e.type||"warning",confirmButtonClass:e.confirmButtonClass}),!0}catch(t){return!1}})},confirmDelete(e,t){return i(this,null,function*(){const r=t||(e?`Are you sure you want to delete "${e}"? This action cannot be undone.`:"Are you sure you want to delete this item? This action cannot be undone.");return this.confirm({title:"Confirm Delete",message:r,type:"error",confirmButtonText:"Delete",confirmButtonClass:"el-button--danger"})})},confirmBulkAction(e,t){return i(this,null,function*(){return this.confirm({title:`Confirm Bulk ${e}`,message:`Are you sure you want to ${e.toLowerCase()} ${t} item(s)?`,type:"warning",confirmButtonText:e})})},loading:(e="Loading...",t)=>E(s({message:e,type:"info",duration:0,showClose:!1},t))},{confirmDelete:L,confirmBulkAction:R}=P,I=k.create({baseURL:"/api",timeout:1e4,headers:{"Content-Type":"application/json"}});I.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),I.interceptors.response.use(e=>{if(e.data&&!e.data.success&&e.data.error){const t=new Error(e.data.error.message);throw t.response=e,t}return e},e=>{var t,r,o,n,s,a,i,l,u,c,d;401===(null==(t=e.response)?void 0:t.status)&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),"/login"!==window.location.pathname&&(P.warning("Session expired. Please log in again."),window.location.href="/login")),429===(null==(r=e.response)?void 0:r.status)&&P.error("Too many requests. Please slow down."),(null==(o=e.response)?void 0:o.status)&&e.response.status>=500&&P.error("Server error. Please try again later.");const m=(null==(a=null==(s=null==(n=e.response)?void 0:n.data)?void 0:s.error)?void 0:a.message)||e.message||"An unexpected error occurred";return Promise.reject({message:m,status:null==(i=e.response)?void 0:i.status,code:null==(c=null==(u=null==(l=e.response)?void 0:l.data)?void 0:u.error)?void 0:c.code,data:null==(d=e.response)?void 0:d.data,originalError:e})});const j=class e{constructor(){a(this,"refreshTimer",null)}login(e){return i(this,null,function*(){var t;try{const r=yield I.post("/auth/login",e);if(r.data.success&&r.data.data){const e=r.data.data;return this.setTokens(e.tokens.access_token,e.user),this.startTokenRefresh(),e}throw new Error((null==(t=r.data.error)?void 0:t.message)||"Login failed")}catch(r){throw new Error(r.message||"Login failed")}})}logout(){return i(this,null,function*(){try{yield I.post("/auth/logout")}catch(e){}finally{this.clearTokens(),this.stopTokenRefresh()}})}verifyToken(){return i(this,null,function*(){if(!this.getToken())return null;try{const e=yield I.get("/auth/verify");if(e.data.success&&e.data.data)return e.data.data}catch(e){this.clearTokens()}return null})}getToken(){return localStorage.getItem(e.TOKEN_KEY)}getUser(){const t=localStorage.getItem(e.USER_KEY);if(t)try{return JSON.parse(t)}catch(r){this.clearTokens()}return null}isAuthenticated(){return!!this.getToken()&&!!this.getUser()}setTokens(t,r){localStorage.setItem(e.TOKEN_KEY,t),localStorage.setItem(e.USER_KEY,JSON.stringify(r))}clearTokens(){localStorage.removeItem(e.TOKEN_KEY),localStorage.removeItem(e.USER_KEY),localStorage.removeItem(e.REFRESH_TOKEN_KEY)}startTokenRefresh(){this.refreshTimer=window.setInterval(()=>i(this,null,function*(){try{(yield this.verifyToken())||(this.stopTokenRefresh(),window.dispatchEvent(new CustomEvent("auth:token-expired")))}catch(e){this.stopTokenRefresh(),window.dispatchEvent(new CustomEvent("auth:token-expired"))}}),3e6)}stopTokenRefresh(){null!==this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null)}};a(j,"TOKEN_KEY","auth_token"),a(j,"USER_KEY","auth_user"),a(j,"REFRESH_TOKEN_KEY","refresh_token");const K=new j,x=h("auth",()=>{const e=f(!1),t=f(null),r=f(!1),o=f(null),n=()=>i(void 0,null,function*(){r.value=!0,o.value=null;try{yield K.logout()}catch(n){}finally{t.value=null,e.value=!1,r.value=!1}}),s=()=>i(void 0,null,function*(){yield n()});return"undefined"!=typeof window&&window.addEventListener("auth:token-expired",s),{isAuthenticated:e,user:t,loading:r,error:o,initAuth:()=>i(void 0,null,function*(){r.value=!0,o.value=null;try{if(K.isAuthenticated()){const r=yield K.verifyToken();r?(t.value=r,e.value=!0):yield n()}}catch(s){yield n()}finally{r.value=!1}}),login:n=>i(void 0,null,function*(){r.value=!0,o.value=null;try{const r=yield K.login(n);return t.value=r.user,e.value=!0,r}catch(s){throw o.value=s.message||"Login failed",s}finally{r.value=!1}}),logout:n,clearError:()=>{o.value=null},token:()=>K.getToken()}}),q=p({history:g(),routes:[{path:"/",name:"home",redirect:"/dashboard"},{path:"/login",name:"login",component:()=>C(()=>import("./Login-CgED9NaC.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{requiresGuest:!0}},{path:"/admin",component:()=>C(()=>import("./AdminLayout-gMCMbuwT.js"),__vite__mapDeps([6,1,2,3,4,7])),meta:{requiresAuth:!0},children:[{path:"/dashboard",name:"dashboard",component:()=>C(()=>import("./Dashboard-DJeUCf1H.js"),__vite__mapDeps([8,9,1,2,3,10,4,11])),meta:{requiresAuth:!0}},{path:"/articles",name:"articles",component:()=>C(()=>import("./Articles-C-dXoets.js"),__vite__mapDeps([12,1,9,2,13,14,4,15])),meta:{requiresAuth:!0}},{path:"/articles/create",name:"article-create",component:()=>C(()=>import("./ArticleCreate-CayHYa0h.js"),__vite__mapDeps([16,17,1,18,2,3,14,13,19,4,20])),meta:{requiresAuth:!0}},{path:"/articles/edit/:id",name:"article-edit",component:()=>C(()=>import("./ArticleEdit-Bab0P9Fc.js"),__vite__mapDeps([21,1,17,18,2,3,14,13,19,4,22])),meta:{requiresAuth:!0}},{path:"/categories",name:"categories",component:()=>C(()=>import("./Categories-CNxg2qX5.js"),__vite__mapDeps([23,9,1,2,14,3,4,24])),meta:{requiresAuth:!0}}]},{path:"/:pathMatch(.*)*",name:"not-found",redirect:"/dashboard"}]});q.beforeEach((e,t,r)=>i(void 0,null,function*(){const o=x(),n=e.matched.some(e=>e.meta.requiresAuth),s=e.matched.some(e=>e.meta.requiresGuest);void 0===t.name&&(yield o.initAuth()),n&&!o.isAuthenticated?r("/login"):s&&o.isAuthenticated?r("/dashboard"):r()}));const B=y(S);for(const[N,Y]of Object.entries(T))B.component(N,Y);const D=v();B.use(D),B.use(q),B.use(A),B.mount("#app");export{I as a,L as b,R as c,P as n,x as u};
