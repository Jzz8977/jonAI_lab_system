var e=(e,t,a)=>new Promise((l,o)=>{var s=e=>{try{r(a.next(e))}catch(t){o(t)}},i=e=>{try{r(a.throw(e))}catch(t){o(t)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(s,i);r((a=a.apply(e,t)).next())});import{x as t,aC as a,c as l,al as o,y as s,z as i,A as r,Q as c,I as n,u as d,M as u,H as p,O as h,P as m,a6 as g,K as f,L as b,aB as v,r as _,aD as y,j as w,w as A}from"./vendor-Gjpba6V1.js";import{u as x}from"./index-C7qi9upo.js";import{o as C,e as k,f as H,h as L,j as I,u as j,k as B,s as E,m as P,E as S,a as D,n as J,p as N,q as T}from"./ui-BjnOHbRg.js";import{_ as $}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./utils-C5DcNM9U.js";const O={class:"admin-sidebar"},W={class:"sidebar-header"},z={key:0,class:"brand"},U={key:1,class:"brand-collapsed"},q={class:"sidebar-footer"},K=$(t({__name:"AdminSidebar",props:{collapsed:{type:Boolean}},emits:["toggle-collapse"],setup(e){const t=a(),h=l(()=>{const e=t.path;return e.startsWith("/dashboard")?"/dashboard":e.startsWith("/articles")?"/articles":e.startsWith("/categories")?"/categories":"/dashboard"});return(e,t)=>{const a=o("el-icon"),l=o("el-menu-item"),m=o("el-menu"),g=o("el-button");return i(),s("div",O,[r("div",W,[e.collapsed?(i(),s("div",U,t[2]||(t[2]=[r("span",{class:"brand-icon"},"J",-1)]))):(i(),s("div",z,t[1]||(t[1]=[r("h2",null,"JonAI-Lab",-1),r("span",{class:"subtitle"},"Admin",-1)])))]),c(m,{"default-active":h.value,class:"sidebar-menu","background-color":"#001529","text-color":"#rgba(255, 255, 255, 0.65)","active-text-color":"#1890ff",collapse:e.collapsed,"collapse-transition":!1,router:""},{default:n(()=>[c(l,{index:"/dashboard"},{title:n(()=>t[3]||(t[3]=[u("Dashboard",-1)])),default:n(()=>[c(a,null,{default:n(()=>[c(d(C))]),_:1})]),_:1}),c(l,{index:"/articles"},{title:n(()=>t[4]||(t[4]=[u("Articles",-1)])),default:n(()=>[c(a,null,{default:n(()=>[c(d(k))]),_:1})]),_:1}),c(l,{index:"/categories"},{title:n(()=>t[5]||(t[5]=[u("Categories",-1)])),default:n(()=>[c(a,null,{default:n(()=>[c(d(H))]),_:1})]),_:1})]),_:1},8,["default-active","collapse"]),r("div",q,[c(g,{type:"text",class:"collapse-btn",onClick:t[0]||(t[0]=t=>e.$emit("toggle-collapse"))},{default:n(()=>[c(a,null,{default:n(()=>[e.collapsed?(i(),p(d(L),{key:0})):(i(),p(d(I),{key:1}))]),_:1})]),_:1})])])}}}),[["__scopeId","data-v-239f0c11"]]),M={class:"admin-header"},Q={class:"header-right"},F={class:"user-profile"},G={class:"user-avatar"},R={class:"user-info"},V={class:"username"},X={class:"user-role"},Y={class:"header-actions"},Z=$(t({__name:"AdminHeader",props:{user:{}},emits:["logout"],setup(t,{emit:a}){const p=a,m=l(()=>null),g=t=>e(this,null,function*(){switch(t){case"profile":f();break;case"preferences":b();break;case"logout":yield v()}}),f=()=>{S.info("Profile settings will be implemented in a future update")},b=()=>{S.info("Preferences will be implemented in a future update")},v=()=>e(this,null,function*(){try{yield D.confirm("Are you sure you want to logout?","Confirm Logout",{confirmButtonText:"Logout",cancelButtonText:"Cancel",type:"warning",confirmButtonClass:"el-button--danger"}),p("logout")}catch(e){}});return(e,t)=>{const a=o("el-icon"),l=o("el-avatar"),p=o("el-dropdown-item"),f=o("el-dropdown-menu"),b=o("el-dropdown"),v=o("el-button"),_=o("el-tooltip");return i(),s("div",M,[t[4]||(t[4]=r("div",{class:"header-left"},null,-1)),r("div",Q,[c(b,{trigger:"click",placement:"bottom-end",onCommand:g},{dropdown:n(()=>[c(f,null,{default:n(()=>[c(p,{command:"profile",icon:d(j)},{default:n(()=>t[1]||(t[1]=[u(" Profile Settings ",-1)])),_:1,__:[1]},8,["icon"]),c(p,{command:"preferences",icon:d(E)},{default:n(()=>t[2]||(t[2]=[u(" Preferences ",-1)])),_:1,__:[2]},8,["icon"]),c(p,{divided:""}),c(p,{command:"logout",icon:d(P)},{default:n(()=>t[3]||(t[3]=[u(" Logout ",-1)])),_:1,__:[3]},8,["icon"])]),_:1})]),default:n(()=>{var t,o;return[r("div",F,[r("div",G,[c(l,{size:32,src:m.value},{default:n(()=>[c(a,null,{default:n(()=>[c(d(j))]),_:1})]),_:1},8,["src"])]),r("div",R,[r("span",V,h((null==(t=e.user)?void 0:t.username)||"Admin"),1),r("span",X,h((null==(o=e.user)?void 0:o.role)||"Administrator"),1)]),c(a,{class:"dropdown-icon"},{default:n(()=>[c(d(B))]),_:1})])]}),_:1}),r("div",Y,[c(_,{content:"Settings",placement:"bottom"},{default:n(()=>[c(v,{type:"text",icon:d(E),circle:"",onClick:t[0]||(t[0]=e=>g("preferences"))},null,8,["icon"])]),_:1})])])])}}}),[["__scopeId","data-v-8cbf2092"]]),ee={class:"admin-breadcrumb"},te=$(t({__name:"AdminBreadcrumb",setup(e){const t=a(),r={"/dashboard":[{title:"Home",path:"/",to:"/dashboard",icon:J},{title:"Dashboard",path:"/dashboard",icon:C}],"/articles":[{title:"Home",path:"/",to:"/dashboard",icon:J},{title:"Articles",path:"/articles",icon:k}],"/articles/new":[{title:"Home",path:"/",to:"/dashboard",icon:J},{title:"Articles",path:"/articles",to:"/articles",icon:k},{title:"New Article",path:"/articles/new",icon:T}],"/articles/edit":[{title:"Home",path:"/",to:"/dashboard",icon:J},{title:"Articles",path:"/articles",to:"/articles",icon:k},{title:"Edit Article",path:"/articles/edit",icon:N}],"/categories":[{title:"Home",path:"/",to:"/dashboard",icon:J},{title:"Categories",path:"/categories",icon:H}],"/categories/new":[{title:"Home",path:"/",to:"/dashboard",icon:J},{title:"Categories",path:"/categories",to:"/categories",icon:H},{title:"New Category",path:"/categories/new",icon:T}],"/categories/edit":[{title:"Home",path:"/",to:"/dashboard",icon:J},{title:"Categories",path:"/categories",to:"/categories",icon:H},{title:"Edit Category",path:"/categories/edit",icon:N}]},d=l(()=>{const e=t.path;if(r[e])return r[e];if(e.includes("/articles/")&&e.includes("/edit"))return[{title:"Home",path:"/",to:"/dashboard",icon:J},{title:"Articles",path:"/articles",to:"/articles",icon:k},{title:"Edit Article",path:e,icon:N}];if(e.includes("/categories/")&&e.includes("/edit"))return[{title:"Home",path:"/",to:"/dashboard",icon:J},{title:"Categories",path:"/categories",to:"/categories",icon:H},{title:"Edit Category",path:e,icon:N}];if(e.match(/^\/articles\/\d+$/))return[{title:"Home",path:"/",to:"/dashboard",icon:J},{title:"Articles",path:"/articles",to:"/articles",icon:k},{title:"Article Details",path:e,icon:k}];if(e.match(/^\/categories\/\d+$/))return[{title:"Home",path:"/",to:"/dashboard",icon:J},{title:"Categories",path:"/categories",to:"/categories",icon:H},{title:"Category Details",path:e,icon:H}];const a=e.split("/").filter(Boolean),l=[{title:"Home",path:"/",to:"/dashboard",icon:J}];let o="";return a.forEach((e,t)=>{o+=`/${e}`;const s=e.charAt(0).toUpperCase()+e.slice(1).replace(/-/g," ");let i;"dashboard"===e?i=C:"articles"===e?i=k:"categories"===e?i=H:"new"===e?i=T:"edit"===e&&(i=N),l.push({title:s,path:o,to:t===a.length-1?void 0:o,icon:i})}),l});return(e,t)=>{const a=o("el-icon"),l=o("el-breadcrumb-item"),r=o("el-breadcrumb");return i(),s("div",ee,[c(r,{separator:"/"},{default:n(()=>[(i(!0),s(m,null,g(d.value,e=>(i(),p(l,{key:e.path,to:e.to},{default:n(()=>[e.icon?(i(),p(a,{key:0,class:"breadcrumb-icon"},{default:n(()=>[(i(),p(b(e.icon)))]),_:2},1024)):f("",!0),u(" "+h(e.title),1)]),_:2},1032,["to"]))),128))]),_:1})])}}}),[["__scopeId","data-v-83f69ba5"]]),ae={class:"admin-layout"},le={key:0,class:"loading-overlay"},oe={key:1,class:"error-boundary"},se={class:"breadcrumb-container"},ie=$(t({__name:"AdminLayout",setup(t){const a=v(),d=x(),h=_(!1),m=_(!1),g=_(null),b=l(()=>d.user),C=()=>{h.value=!h.value},k=()=>e(this,null,function*(){try{m.value=!0,yield d.logout(),S.success("Logged out successfully"),a.push("/login")}catch(e){S.error("Logout failed: "+(e.message||"Unknown error"))}finally{m.value=!1}}),H=()=>{g.value=null};y(e=>(g.value={title:"Layout Error",message:e.message||"An unexpected error occurred in the admin layout"},!1)),w(()=>{const e=localStorage.getItem("sidebar-collapsed");null!==e&&(h.value=JSON.parse(e))});return A(h,()=>{localStorage.setItem("sidebar-collapsed",JSON.stringify(h.value))}),(e,t)=>{const a=o("el-loading-service"),l=o("el-alert"),d=o("el-button"),v=o("el-aside"),_=o("el-header"),y=o("router-view"),w=o("el-main"),A=o("el-container");return i(),s("div",ae,[m.value?(i(),s("div",le,[c(a)])):f("",!0),g.value?(i(),s("div",oe,[c(l,{title:g.value.title||"An error occurred",description:g.value.message,type:"error","show-icon":"",closable:!1},null,8,["title","description"]),c(d,{onClick:H,type:"primary",style:{"margin-top":"16px"}},{default:n(()=>t[0]||(t[0]=[u(" Try Again ",-1)])),_:1,__:[0]})])):(i(),p(A,{key:2,class:"layout-container"},{default:n(()=>[c(v,{width:h.value?"64px":"250px",class:"sidebar"},{default:n(()=>[c(K,{collapsed:h.value,onToggleCollapse:C},null,8,["collapsed"])]),_:1},8,["width"]),c(A,{class:"main-container"},{default:n(()=>[c(_,{height:"60px",class:"header"},{default:n(()=>[c(Z,{user:b.value,onLogout:k},null,8,["user"])]),_:1}),r("div",se,[c(te)]),c(w,{class:"content"},{default:n(()=>[c(y)]),_:1})]),_:1})]),_:1}))])}}}),[["__scopeId","data-v-19ec6376"]]);export{ie as default};
