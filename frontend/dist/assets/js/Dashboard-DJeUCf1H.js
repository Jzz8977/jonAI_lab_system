var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,r=(e,r)=>{for(var i in r||(r={}))a.call(r,i)&&l(e,i,r[i]);if(t)for(var i of t(r))s.call(r,i)&&l(e,i,r[i]);return e},i=(e,t,a)=>new Promise((s,l)=>{var r=e=>{try{o(a.next(e))}catch(t){l(t)}},i=e=>{try{o(a.throw(e))}catch(t){l(t)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,i);o((a=a.apply(e,t)).next())});import{a as o}from"./index-C7qi9upo.js";import{u as n}from"./useApi-BRoN40Jh.js";import{t as c,r as d,v as u,e as v,w as p,x as y,y as h,z as f,A as m,B as g,C as b}from"./ui-BjnOHbRg.js";import{x as _,c as C,y as k,z as w,C as A,A as F,O as x,Q as D,u as S,I as L,H as z,L as E,P as M,a6 as j,D as T,r as V,w as $,n as P,j as I,ar as R,J as B}from"./vendor-Gjpba6V1.js";import{_ as O}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{C as H,a as U,L as W,P as K,b as N,p as J,c as Y,d as q,i as Q}from"./charts-DpHpzj3Z.js";import"./utils-C5DcNM9U.js";const Z={getDashboardMetrics(e){return i(this,null,function*(){return(yield o.get("/analytics/dashboard",{params:e?{range:e}:void 0})).data.data})},getTopArticles(e=10,t){return i(this,null,function*(){return(yield o.get("/analytics/articles/top",{params:r({limit:e},t&&{range:t})})).data.data.articles})},getArticleAnalytics(e){return i(this,null,function*(){return(yield o.get(`/analytics/articles/${e}`)).data.data})},getEngagementSummary(e="7d"){return i(this,null,function*(){return(yield o.get("/analytics/engagement",{params:{range:e}})).data.data})},incrementView(e){return i(this,null,function*(){return(yield o.post(`/analytics/articles/${e}/view`)).data.data})},toggleLike(e){return i(this,null,function*(){return(yield o.post(`/analytics/articles/${e}/like`)).data.data})},getLikeStatus(e){return i(this,null,function*(){return(yield o.get(`/analytics/articles/${e}/status`)).data.data})}},G={class:"metrics-content"},X={class:"metrics-info"},ee={class:"metrics-title"},te={class:"metrics-value"},ae=O(_({__name:"MetricsCard",props:{title:{},value:{},icon:{},color:{}},setup(e){const t=e,a={Document:v,View:u,Like:d,TrendCharts:c},s=C(()=>a[t.icon]||v),l=C(()=>t.value>=1e6?(t.value/1e6).toFixed(1)+"M":t.value>=1e3?(t.value/1e3).toFixed(1)+"K":t.value.toString());return(e,t)=>(w(),k("div",{class:"metrics-card",style:A({borderLeftColor:e.color})},[F("div",G,[F("div",X,[F("h3",ee,x(e.title),1),F("div",te,x(l.value),1)]),F("div",{class:"metrics-icon",style:A({backgroundColor:e.color})},[D(S(p),{size:24},{default:L(()=>[(w(),z(E(s.value)))]),_:1})],4)])],4))}}),[["__scopeId","data-v-7d602487"]]),se={class:"top-articles"},le={key:0,class:"empty-state"},re={key:1,class:"articles-list"},ie={class:"article-rank"},oe={class:"article-thumbnail"},ne=["src","alt"],ce={key:1,class:"thumbnail-placeholder"},de={class:"article-info"},ue={class:"article-title"},ve={class:"article-meta"},pe={class:"category"},ye={class:"date"},he={class:"article-stats"},fe={class:"stat-item"},me={class:"stat-item"},ge=O(_({__name:"TopArticlesRanking",props:{articles:{}},setup(e){const t=e=>0===e?"rank-gold":1===e?"rank-silver":2===e?"rank-bronze":"",a=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),s=e=>{var t;const a=e.target;a.style.display="none";const s=null==(t=a.parentElement)?void 0:t.querySelector(".thumbnail-placeholder");s&&(s.style.display="flex")};return(e,l)=>(w(),k("div",se,[0===e.articles.length?(w(),k("div",le,[D(S(p),{size:48,color:"#C0C4CC"},{default:L(()=>[D(S(v))]),_:1}),l[0]||(l[0]=F("p",null,"No articles found",-1))])):(w(),k("div",re,[(w(!0),k(M,null,j(e.articles,(e,l)=>{return w(),k("div",{key:e.id,class:"article-item"},[F("div",ie,[F("span",{class:T(["rank-number",t(l)])},x(l+1),3)]),F("div",oe,[e.thumbnail_url?(w(),k("img",{key:0,src:e.thumbnail_url,alt:e.title,onError:s},null,40,ne)):(w(),k("div",ce,[D(S(p),{size:24,color:"#C0C4CC"},{default:L(()=>[D(S(y))]),_:1})]))]),F("div",de,[F("h4",ue,x(e.title),1),F("div",ve,[F("span",pe,x(e.category.name),1),F("span",ye,x((r=e.published_at||e.created_at,new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))),1)])]),F("div",he,[F("div",fe,[D(S(p),{size:16,color:"#67C23A"},{default:L(()=>[D(S(u))]),_:1}),F("span",null,x(a(e.view_count)),1)]),F("div",me,[D(S(p),{size:16,color:"#E6A23C"},{default:L(()=>[D(S(d))]),_:1}),F("span",null,x(a(e.like_count)),1)])])]);var r}),128))]))]))}}),[["__scopeId","data-v-5af79a74"]]),be={class:"recent-activity"},_e={key:0,class:"empty-state"},Ce={key:1,class:"activity-list"},ke={class:"activity-icon"},we={class:"activity-content"},Ae={class:"activity-header"},Fe={class:"activity-title"},xe={class:"activity-meta"},De={class:"activity-category"},Se={class:"activity-author"},Le={class:"activity-date"},ze={class:"activity-stats"},Ee={class:"stat-group"},Me={class:"stat-group"},je=O(_({__name:"RecentActivityFeed",props:{articles:{}},setup(e){const t=e=>{switch(e){case"published":return m;case"archived":return f;default:return v}},a=e=>{switch(e){case"published":return"#67C23A";case"archived":return"#909399";default:return"#E6A23C"}},s=e=>{switch(e){case"published":return"Published";case"archived":return"Archived";default:return"Draft"}},l=e=>{const t=new Date(e),a=new Date,s=Math.floor((a.getTime()-t.getTime())/1e3);if(s<60)return"Just now";if(s<3600){const e=Math.floor(s/60);return`${e} minute${e>1?"s":""} ago`}if(s<86400){const e=Math.floor(s/3600);return`${e} hour${e>1?"s":""} ago`}if(s<604800){const e=Math.floor(s/86400);return`${e} day${e>1?"s":""} ago`}return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==a.getFullYear()?"numeric":void 0})};return(e,r)=>(w(),k("div",be,[0===e.articles.length?(w(),k("div",_e,[D(S(p),{size:48,color:"#C0C4CC"},{default:L(()=>[D(S(h))]),_:1}),r[0]||(r[0]=F("p",null,"No recent activity",-1))])):(w(),k("div",Ce,[(w(!0),k(M,null,j(e.articles,e=>{return w(),k("div",{key:e.id,class:"activity-item"},[F("div",ke,[D(S(p),{size:20,color:a(e.status)},{default:L(()=>[(w(),z(E(t(e.status))))]),_:2},1032,["color"])]),F("div",we,[F("div",Ae,[F("h4",Fe,x(e.title),1),F("span",{class:T(["activity-status",(r=e.status,`status-${r}`)])},x(s(e.status)),3)]),F("div",xe,[F("span",De,x(e.category.name),1),F("span",Se,"by "+x(e.author.username),1),F("span",Le,x(l(e.created_at)),1)]),F("div",ze,[F("div",Ee,[D(S(p),{size:14,color:"#67C23A"},{default:L(()=>[D(S(u))]),_:1}),F("span",null,x(e.view_count),1)]),F("div",Me,[D(S(p),{size:14,color:"#E6A23C"},{default:L(()=>[D(S(d))]),_:1}),F("span",null,x(e.like_count),1)])])])]);var r}),128))]))]))}}),[["__scopeId","data-v-f1eb8a4c"]]),Te={class:"chart-container"},Ve={key:0,class:"empty-chart"},$e=O(_({__name:"ViewsTrendChart",props:{data:{}},setup(e){H.register(U,W,K,N,J,Y,q,Q);const t=e,a=V();let s=null;const l=()=>{if(!a.value||0===t.data.length)return;s&&s.destroy();const e=a.value.getContext("2d");if(!e)return;const l=t.data.map(e=>new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),r=t.data.map(e=>e.views);s=new H(e,{type:"line",data:{labels:l,datasets:[{label:"Views",data:r,borderColor:"#409EFF",backgroundColor:"rgba(64, 158, 255, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"#409EFF",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8,pointHoverBackgroundColor:"#409EFF",pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:3}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#409EFF",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{title:e=>{const a=e[0].dataIndex;return new Date(t.data[a].date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},label:e=>`Views: ${e.parsed.y.toLocaleString()}`}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{color:"#606266",font:{size:12}}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},border:{display:!1},ticks:{color:"#606266",font:{size:12},callback:function(e){return"number"==typeof e?e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString():e}}}},elements:{point:{hoverRadius:8}}}})};return $(()=>t.data,()=>{P(()=>{l()})},{deep:!0}),I(()=>{P(()=>{l()})}),(e,t)=>(w(),k("div",Te,[0===e.data.length?(w(),k("div",Ve,[D(S(p),{size:48,color:"#C0C4CC"},{default:L(()=>[D(S(c))]),_:1}),t[0]||(t[0]=F("p",null,"No trend data available",-1))])):(w(),k("canvas",{key:1,ref_key:"chartCanvas",ref:a,width:"400",height:"200"},null,512))]))}}),[["__scopeId","data-v-5174dc40"]]),Pe={class:"dashboard"},Ie={class:"dashboard-header"},Re={class:"date-range-picker"},Be={class:"dashboard-content"},Oe={class:"metrics-grid"},He={class:"charts-section"},Ue={class:"chart-container"},We={class:"content-grid"},Ke={class:"content-section"},Ne={class:"content-section"},Je=O(_({__name:"Dashboard",setup(e){const t=V("30d"),{data:a,loading:s,refresh:l}=n(()=>Z.getDashboardMetrics(t.value),{showErrorMessage:!0,loadingMessage:"Loading dashboard data..."}),r=C(()=>a.value&&0!==a.value.total_articles?Math.round(a.value.total_views/a.value.total_articles):0),i=()=>{l()};return I(()=>{}),(e,l)=>{var o,n,c,d,u,v;const p=R("loading");return w(),k("div",Pe,[F("div",Ie,[l[1]||(l[1]=F("h1",null,"Dashboard",-1)),F("div",Re,[D(S(b),{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),onChange:i,placeholder:"Select date range"},{default:L(()=>[D(S(g),{label:"Last 7 days",value:"7d"}),D(S(g),{label:"Last 30 days",value:"30d"}),D(S(g),{label:"All time",value:"all"})]),_:1},8,["modelValue"])])]),B((w(),k("div",Be,[F("div",Oe,[D(ae,{title:"Total Articles",value:(null==(o=S(a))?void 0:o.total_articles)||0,icon:"Document",color:"#409EFF"},null,8,["value"]),D(ae,{title:"Total Views",value:(null==(n=S(a))?void 0:n.total_views)||0,icon:"View",color:"#67C23A"},null,8,["value"]),D(ae,{title:"Total Likes",value:(null==(c=S(a))?void 0:c.total_likes)||0,icon:"Like",color:"#E6A23C"},null,8,["value"]),D(ae,{title:"Avg. Views per Article",value:r.value,icon:"TrendCharts",color:"#F56C6C"},null,8,["value"])]),F("div",He,[F("div",Ue,[l[2]||(l[2]=F("h3",null,"Views Trend",-1)),D($e,{data:(null==(d=S(a))?void 0:d.views_trend)||[]},null,8,["data"])])]),F("div",We,[F("div",Ke,[l[3]||(l[3]=F("h3",null,"Top Performing Articles",-1)),D(ge,{articles:(null==(u=S(a))?void 0:u.top_articles)||[]},null,8,["articles"])]),F("div",Ne,[l[4]||(l[4]=F("h3",null,"Recent Activity",-1)),D(je,{articles:(null==(v=S(a))?void 0:v.recent_articles)||[]},null,8,["articles"])])])])),[[p,S(s)]])])}}}),[["__scopeId","data-v-2a21b799"]]);export{Je as default};
