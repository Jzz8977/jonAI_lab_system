import{d as B,c as E,g as D,a as m,s as a,b as e,e as s,w as t,m as d,v as H,q as f,x as W,y as z,i as L,z as O,A as R,h as c,n as T,t as J,B as U,C as M,D as j,E as w,F as q,u as F,r as $,G,o as K,H as Q,j as X,f as Y}from"./index-CNoniGB4.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as Z}from"./AdminBreadcrumb-DCZ8iimf.js";const ee={class:"admin-sidebar"},te={class:"sidebar-header"},oe={key:0,class:"brand"},se={key:1,class:"brand-collapsed"},ne={class:"sidebar-footer"},ae=B({__name:"AdminSidebar",props:{collapsed:{type:Boolean}},emits:["toggle-collapse"],setup(N){const v=D(),g=E(()=>{const n=v.path;return n.startsWith("/dashboard")?"/dashboard":n.startsWith("/articles")?"/articles":n.startsWith("/categories")?"/categories":"/dashboard"});return(n,o)=>{const r=s("el-icon"),_=s("el-menu-item"),b=s("el-menu"),u=s("el-button");return c(),m("div",ee,[a("div",te,[n.collapsed?(c(),m("div",se,o[2]||(o[2]=[a("span",{class:"brand-icon"},"J",-1)]))):(c(),m("div",oe,o[1]||(o[1]=[a("h2",null,"JonAI-Lab",-1),a("span",{class:"subtitle"},"Admin",-1)])))]),e(b,{"default-active":g.value,class:"sidebar-menu","background-color":"#001529","text-color":"#rgba(255, 255, 255, 0.65)","active-text-color":"#1890ff",collapse:n.collapsed,"collapse-transition":!1,router:""},{default:t(()=>[e(_,{index:"/dashboard"},{title:t(()=>o[3]||(o[3]=[f("Dashboard",-1)])),default:t(()=>[e(r,null,{default:t(()=>[e(d(H))]),_:1})]),_:1}),e(_,{index:"/articles"},{title:t(()=>o[4]||(o[4]=[f("Articles",-1)])),default:t(()=>[e(r,null,{default:t(()=>[e(d(W))]),_:1})]),_:1}),e(_,{index:"/categories"},{title:t(()=>o[5]||(o[5]=[f("Categories",-1)])),default:t(()=>[e(r,null,{default:t(()=>[e(d(z))]),_:1})]),_:1})]),_:1},8,["default-active","collapse"]),a("div",ne,[e(u,{type:"text",class:"collapse-btn",onClick:o[0]||(o[0]=l=>n.$emit("toggle-collapse"))},{default:t(()=>[e(r,null,{default:t(()=>[n.collapsed?(c(),L(d(O),{key:0})):(c(),L(d(R),{key:1}))]),_:1})]),_:1})])])}}}),le=I(ae,[["__scopeId","data-v-239f0c11"]]),re={class:"admin-header"},de={class:"header-right"},ie={class:"user-profile"},ce={class:"user-avatar"},ue={class:"user-info"},_e={class:"username"},pe={class:"user-role"},me={class:"header-actions"},fe=B({__name:"AdminHeader",props:{user:{}},emits:["logout"],setup(N,{emit:v}){const g=v,n=E(()=>null),o=async u=>{switch(u){case"profile":r();break;case"preferences":_();break;case"logout":await b();break;default:console.warn("Unknown command:",u)}},r=()=>{w.info("Profile settings will be implemented in a future update")},_=()=>{w.info("Preferences will be implemented in a future update")},b=async()=>{try{await q.confirm("Are you sure you want to logout?","Confirm Logout",{confirmButtonText:"Logout",cancelButtonText:"Cancel",type:"warning",confirmButtonClass:"el-button--danger"}),g("logout")}catch{}};return(u,l)=>{const k=s("el-icon"),i=s("el-avatar"),p=s("el-dropdown-item"),A=s("el-dropdown-menu"),x=s("el-dropdown"),C=s("el-button"),S=s("el-tooltip");return c(),m("div",re,[l[4]||(l[4]=a("div",{class:"header-left"},null,-1)),a("div",de,[e(x,{trigger:"click",placement:"bottom-end",onCommand:o},{dropdown:t(()=>[e(A,null,{default:t(()=>[e(p,{command:"profile",icon:d(T)},{default:t(()=>l[1]||(l[1]=[f(" Profile Settings ",-1)])),_:1,__:[1]},8,["icon"]),e(p,{command:"preferences",icon:d(M)},{default:t(()=>l[2]||(l[2]=[f(" Preferences ",-1)])),_:1,__:[2]},8,["icon"]),e(p,{divided:""}),e(p,{command:"logout",icon:d(j)},{default:t(()=>l[3]||(l[3]=[f(" Logout ",-1)])),_:1,__:[3]},8,["icon"])]),_:1})]),default:t(()=>{var h,y;return[a("div",ie,[a("div",ce,[e(i,{size:32,src:n.value},{default:t(()=>[e(k,null,{default:t(()=>[e(d(T))]),_:1})]),_:1},8,["src"])]),a("div",ue,[a("span",_e,J(((h=u.user)==null?void 0:h.username)||"Admin"),1),a("span",pe,J(((y=u.user)==null?void 0:y.role)||"Administrator"),1)]),e(k,{class:"dropdown-icon"},{default:t(()=>[e(d(U))]),_:1})])]}),_:1}),a("div",me,[e(S,{content:"Settings",placement:"bottom"},{default:t(()=>[e(C,{type:"text",icon:d(M),circle:"",onClick:l[0]||(l[0]=h=>o("preferences"))},null,8,["icon"])]),_:1})])])])}}}),ge=I(fe,[["__scopeId","data-v-8cbf2092"]]),ve={class:"admin-layout"},be={key:0,class:"loading-overlay"},he={key:1,class:"error-boundary"},ye={class:"breadcrumb-container"},we=B({__name:"AdminLayout",setup(N){const v=Y(),g=F(),n=$(!1),o=$(!1),r=$(null),_=E(()=>g.user),b=()=>{n.value=!n.value},u=async()=>{try{o.value=!0,await g.logout(),w.success("Logged out successfully"),v.push("/login")}catch(i){w.error("Logout failed: "+(i.message||"Unknown error"))}finally{o.value=!1}},l=()=>{r.value=null};return G(i=>(console.error("Layout error:",i),r.value={title:"Layout Error",message:i.message||"An unexpected error occurred in the admin layout"},!1)),K(()=>{const i=localStorage.getItem("sidebar-collapsed");i!==null&&(n.value=JSON.parse(i))}),Q(n,()=>{localStorage.setItem("sidebar-collapsed",JSON.stringify(n.value))}),(i,p)=>{const A=s("el-loading-service"),x=s("el-alert"),C=s("el-button"),S=s("el-aside"),h=s("el-header"),y=s("router-view"),V=s("el-main"),P=s("el-container");return c(),m("div",ve,[o.value?(c(),m("div",be,[e(A)])):X("",!0),r.value?(c(),m("div",he,[e(x,{title:r.value.title||"An error occurred",description:r.value.message,type:"error","show-icon":"",closable:!1},null,8,["title","description"]),e(C,{onClick:l,type:"primary",style:{"margin-top":"16px"}},{default:t(()=>p[0]||(p[0]=[f(" Try Again ",-1)])),_:1,__:[0]})])):(c(),L(P,{key:2,class:"layout-container"},{default:t(()=>[e(S,{width:n.value?"64px":"250px",class:"sidebar"},{default:t(()=>[e(le,{collapsed:n.value,onToggleCollapse:b},null,8,["collapsed"])]),_:1},8,["width"]),e(P,{class:"main-container"},{default:t(()=>[e(h,{height:"60px",class:"header"},{default:t(()=>[e(ge,{user:_.value,onLogout:u},null,8,["user"])]),_:1}),a("div",ye,[e(Z)]),e(V,{class:"content"},{default:t(()=>[e(y)]),_:1})]),_:1})]),_:1}))])}}}),Ce=I(we,[["__scopeId","data-v-19ec6376"]]);export{Ce as default};
