import{d as C,u as E,r as g,c as S,o as q,a as L,b as r,w as s,e as n,f as B,g as R,h as _,i as U,j as F,k as N,l as f,m as t,n as K,p as M,q as P,t as T,s as m,E as z}from"./index-CNoniGB4.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"login-container"},j=C({__name:"Login",setup(D){const b=B(),w=R(),a=E(),u=g(),e=g({username:"",password:""}),v={username:[{required:!0,message:"Username is required",trigger:"blur"},{min:3,max:50,message:"Username must be between 3 and 50 characters",trigger:"blur"}],password:[{required:!0,message:"Password is required",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}]},h=S(()=>e.value.username.length>=3&&e.value.password.length>=6),l=async()=>{if(u.value)try{if(!await u.value.validate())return;await a.login(e.value),z.success("Login successful!");const o=w.query.returnTo||"/dashboard";b.push(o)}catch(i){console.error("Login failed:",i)}};return q(()=>{a.clearError()}),(i,o)=>{const p=n("el-input"),d=n("el-form-item"),y=n("el-button"),V=n("el-form"),x=n("el-alert"),k=n("el-card");return _(),L("div",I,[r(k,{class:"login-card",shadow:"always"},{header:s(()=>o[2]||(o[2]=[m("div",{class:"login-header"},[m("h2",null,"Blog Admin Login"),m("p",null,"Sign in to manage your blog content")],-1)])),default:s(()=>[r(V,{ref_key:"loginFormRef",ref:u,model:e.value,rules:v,"label-position":"top",size:"large",onSubmit:N(l,["prevent"])},{default:s(()=>[r(d,{label:"Username",prop:"username"},{default:s(()=>[r(p,{modelValue:e.value.username,"onUpdate:modelValue":o[0]||(o[0]=c=>e.value.username=c),placeholder:"Enter your username","prefix-icon":t(K),clearable:"","data-testid":"username-input",onKeyup:f(l,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),r(d,{label:"Password",prop:"password"},{default:s(()=>[r(p,{modelValue:e.value.password,"onUpdate:modelValue":o[1]||(o[1]=c=>e.value.password=c),type:"password",placeholder:"Enter your password","prefix-icon":t(M),"show-password":"",clearable:"","data-testid":"password-input",onKeyup:f(l,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),r(d,null,{default:s(()=>[r(y,{type:"primary",size:"large",loading:t(a).loading,disabled:!h.value,onClick:l,class:"login-button","data-testid":"login-button"},{default:s(()=>[P(T(t(a).loading?"Signing in...":"Sign In"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"]),t(a).error?(_(),U(x,{key:0,title:t(a).error,type:"error",closable:!0,onClose:t(a).clearError,class:"error-alert"},null,8,["title","onClose"])):F("",!0)]),_:1})])}}}),J=A(j,[["__scopeId","data-v-dd53a6a1"]]);export{J as default};
